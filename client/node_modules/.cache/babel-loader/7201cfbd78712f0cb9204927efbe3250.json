{"ast":null,"code":"function ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nimport { isFunction, logger, throttle } from \"@rpldy/shared\";\nimport addLife from \"@rpldy/life-events\";\nimport defaultSend from \"@rpldy/sender\";\nimport { PROGRESS_DELAY, SENDER_EVENTS } from \"./consts\";\nimport { DEFAULT_OPTIONS, DEFAULT_PARAM_NAME } from \"./defaults\";\n\nvar reportItemsProgress = function (items, completed, loaded, trigger) {\n  items.forEach(function (item) {\n    logger.debugLog(\"uploady.uploader.processor: file: \".concat(item.id, \" progress event: loaded(\").concat(loaded, \") - completed(\").concat(completed, \")\"));\n    trigger(SENDER_EVENTS.ITEM_PROGRESS, item, completed, loaded);\n  });\n};\n\nvar onItemUploadProgress = function (items, batch, e, trigger) {\n  var completed = Math.min(e.loaded / e.total * 100, 100),\n      completedPerItem = completed / items.length,\n      loadedAverage = e.loaded / items.length;\n  reportItemsProgress(items, completedPerItem, loadedAverage, trigger);\n  trigger(SENDER_EVENTS.BATCH_PROGRESS, batch);\n};\n\nvar createBatchItemsSender = function () {\n  var _addLife = addLife({\n    send: function (items, batch, batchOptions) {\n      var destination = batchOptions.destination,\n          url = destination === null || destination === void 0 ? void 0 : destination.url;\n      var throttledProgress = throttle(function (e) {\n        return onItemUploadProgress(items, batch, e, trigger);\n      }, PROGRESS_DELAY, true);\n      var send = isFunction(batchOptions.send) ? batchOptions.send : defaultSend;\n      return send(items, url, {\n        method: (destination === null || destination === void 0 ? void 0 : destination.method) || batchOptions.method || DEFAULT_OPTIONS.method,\n        paramName: (destination === null || destination === void 0 ? void 0 : destination.filesParamName) || batchOptions.inputFieldName || DEFAULT_PARAM_NAME,\n        params: _objectSpread(_objectSpread({}, batchOptions.params), destination === null || destination === void 0 ? void 0 : destination.params),\n        forceJsonResponse: batchOptions.forceJsonResponse,\n        withCredentials: batchOptions.withCredentials,\n        formatGroupParamName: batchOptions.formatGroupParamName,\n        headers: destination === null || destination === void 0 ? void 0 : destination.headers,\n        sendWithFormData: batchOptions.sendWithFormData,\n        formatServerResponse: batchOptions.formatServerResponse\n      }, throttledProgress);\n    }\n  }, Object.values(SENDER_EVENTS)),\n      trigger = _addLife.trigger,\n      sender = _addLife.target;\n\n  return sender;\n};\n\nexport default createBatchItemsSender;","map":{"version":3,"sources":["C:/Users/lucki/Desktop/ClassCodeProjects/amtil-mc/node_modules/@rpldy/uploader/lib/esm/batchItemsSender.js"],"names":["ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","value","configurable","writable","isFunction","logger","throttle","addLife","defaultSend","PROGRESS_DELAY","SENDER_EVENTS","DEFAULT_OPTIONS","DEFAULT_PARAM_NAME","reportItemsProgress","items","completed","loaded","trigger","item","debugLog","concat","id","ITEM_PROGRESS","onItemUploadProgress","batch","e","Math","min","total","completedPerItem","loadedAverage","BATCH_PROGRESS","createBatchItemsSender","_addLife","send","batchOptions","destination","url","throttledProgress","method","paramName","filesParamName","inputFieldName","params","forceJsonResponse","withCredentials","formatGroupParamName","headers","sendWithFormData","formatServerResponse","values","sender"],"mappings":"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","sourcesContent":["function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { isFunction, logger, throttle } from \"@rpldy/shared\";\nimport addLife from \"@rpldy/life-events\";\nimport defaultSend from \"@rpldy/sender\";\nimport { PROGRESS_DELAY, SENDER_EVENTS } from \"./consts\";\nimport { DEFAULT_OPTIONS, DEFAULT_PARAM_NAME } from \"./defaults\";\n\nvar reportItemsProgress = function (items, completed, loaded, trigger) {\n  items.forEach(function (item) {\n    logger.debugLog(\"uploady.uploader.processor: file: \".concat(item.id, \" progress event: loaded(\").concat(loaded, \") - completed(\").concat(completed, \")\"));\n    trigger(SENDER_EVENTS.ITEM_PROGRESS, item, completed, loaded);\n  });\n};\n\nvar onItemUploadProgress = function (items, batch, e, trigger) {\n  var completed = Math.min(e.loaded / e.total * 100, 100),\n      completedPerItem = completed / items.length,\n      loadedAverage = e.loaded / items.length;\n  reportItemsProgress(items, completedPerItem, loadedAverage, trigger);\n  trigger(SENDER_EVENTS.BATCH_PROGRESS, batch);\n};\n\nvar createBatchItemsSender = function () {\n  var _addLife = addLife({\n    send: function (items, batch, batchOptions) {\n      var destination = batchOptions.destination,\n          url = destination === null || destination === void 0 ? void 0 : destination.url;\n      var throttledProgress = throttle(function (e) {\n        return onItemUploadProgress(items, batch, e, trigger);\n      }, PROGRESS_DELAY, true);\n      var send = isFunction(batchOptions.send) ? batchOptions.send : defaultSend;\n      return send(items, url, {\n        method: (destination === null || destination === void 0 ? void 0 : destination.method) || batchOptions.method || DEFAULT_OPTIONS.method,\n        paramName: (destination === null || destination === void 0 ? void 0 : destination.filesParamName) || batchOptions.inputFieldName || DEFAULT_PARAM_NAME,\n        params: _objectSpread(_objectSpread({}, batchOptions.params), destination === null || destination === void 0 ? void 0 : destination.params),\n        forceJsonResponse: batchOptions.forceJsonResponse,\n        withCredentials: batchOptions.withCredentials,\n        formatGroupParamName: batchOptions.formatGroupParamName,\n        headers: destination === null || destination === void 0 ? void 0 : destination.headers,\n        sendWithFormData: batchOptions.sendWithFormData,\n        formatServerResponse: batchOptions.formatServerResponse\n      }, throttledProgress);\n    }\n  }, Object.values(SENDER_EVENTS)),\n      trigger = _addLife.trigger,\n      sender = _addLife.target;\n\n  return sender;\n};\n\nexport default createBatchItemsSender;"]},"metadata":{},"sourceType":"module"}